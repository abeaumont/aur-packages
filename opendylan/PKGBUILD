# Contributor: manveru <m.fellinger@gmail.com>
# Contributor: Florian Richter <Florian_Richter@gmx.de>
# Contributor: b4283

pkgname=opendylan
pkgver=1.0beta5
pkgrel=1
pkgdesc="Dylan is an advanced, object-oriented, dynamic language which supports the rapid development of programs."
arch=(i686 x86_64)
depends=('glibc')
url="http://www.opendylan.org"
license="LGPL"
install=opendylan.install

if [[ $CARCH == "i686" ]]; then
	source=(http://www.opendylan.org/downloads/opendylan/$pkgver/$pkgname-$pkgver-x86-linux.tar.bz2)
	md5sums=('04fcb4fd431a5693ac08ce18e99dee3e')
elif [[ $CARCH == "x86_64" ]]; then
	source=(http://www.opendylan.org/downloads/opendylan/$pkgver/$pkgname-$pkgver-x86_64-linux.tar.bz2)
	md5sums=('384495d9beb8d01516737935ecd53af4')
fi
	
build() {
	mkdir -p $startdir/pkg/usr/bin
	mkdir -p $startdir/pkg/opt/opendylan
	if [[ $CARCH == "i686" ]]; then
		cp -r $startdir/src/$pkgname-$pkgver/{lib,sources,bin} $startdir/pkg/opt/opendylan
		ln -sf /opt/opendylan/bin/opendylan ${startdir}/pkg/usr/bin/opendylan
		ln -sf /opt/opendylan/bin/make-dylan-app ${startdir}/pkg/usr/bin/make-dylan-app
	elif [[ $CARCH == "x86_64" ]]; then
		cp -r $startdir/src/$pkgname-$pkgver/{bin,databases,include,lib} $startdir/pkg/opt/opendylan
		ln -sf /opt/opendylan/bin/minimal-console-compiler ${startdir}/pkg/usr/bin/opendylan
	fi
}


